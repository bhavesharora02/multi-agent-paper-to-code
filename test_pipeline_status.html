<!DOCTYPE html>
<html>
<head>
    <title>Pipeline Status Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .status { padding: 10px; margin: 10px 0; border: 1px solid #ccc; }
        .multi-agent { background: #d4edda; }
        .legacy { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>Multi-Agent Pipeline Status Check</h1>
    <div id="status"></div>
    <button onclick="checkConfig()">Check Configuration</button>
    <button onclick="testStatus()">Test Status Endpoint</button>
    
    <script>
        async function checkConfig() {
            const response = await fetch('/check-config');
            const data = await response.json();
            document.getElementById('status').innerHTML = `
                <div class="status ${data.use_multi_agent ? 'multi-agent' : 'legacy'}">
                    <h3>Configuration Status:</h3>
                    <p><strong>Multi-Agent Pipeline:</strong> ${data.use_multi_agent ? '✅ ENABLED' : '❌ DISABLED'}</p>
                    <p><strong>LLM Extractor:</strong> ${data.use_llm_extractor ? '✅ ENABLED' : '❌ DISABLED'}</p>
                    <p><strong>LLM Provider:</strong> ${data.llm_provider || 'N/A'}</p>
                    <p><strong>Model:</strong> ${data.model || 'N/A'}</p>
                </div>
            `;
        }
        
        async function testStatus() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '<p>Testing status endpoint format...</p>';
            
            // Simulate a status check
            const mockStatus = {
                status: 'processing',
                progress: 25,
                message: 'Phase 1: Analyzing paper content with AI...'
            };
            
            statusDiv.innerHTML += `
                <div class="status">
                    <h3>Status Endpoint Format:</h3>
                    <pre>${JSON.stringify(mockStatus, null, 2)}</pre>
                    <p>✅ Status endpoint should return: status, progress, message</p>
                </div>
            `;
        }
        
        // Auto-check on load
        window.onload = checkConfig;
    </script>
</body>
</html>

